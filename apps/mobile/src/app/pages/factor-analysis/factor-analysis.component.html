<ion-page>
  <ion-content class="factor-analysis__content">
    <div class="factor-analysis__container">
      <!-- Header -->
      <h1 class="factor-analysis__header">Factor analysis</h1>

      <!-- Filters -->
      <div class="factor-analysis__filters">
        <div class="factor-analysis__filters-dropdown team-dropdown-container">
          <ion-button
            fill="outline"
            (click)="showTeamDropdown.set(!showTeamDropdown())"
          >
            {{ selectedTeam() }} ▼
          </ion-button>
          @if (showTeamDropdown()) {
            <div class="factor-analysis__filters-dropdown-menu">
              @for (team of TEAMS; track team) {
                <button (click)="selectTeam(team)">
                  <span>{{ team }}</span>
                </button>
              }
            </div>
          }
        </div>
        <ion-button fill="outline">
          Last 30 days ▼
        </ion-button>
      </div>

      <!-- Factor Grid -->
      <div class="factor-analysis__grid">
        @for (factor of factors(); track factor.name) {
          <div class="factor-analysis__grid-item">
            <div
              class="factor-analysis__grid-item-bar"
              [style.backgroundColor]="factor.color"
            ></div>
            <div class="factor-analysis__grid-item-name">{{ factor.name }}</div>
            <div class="factor-analysis__grid-item-value">{{ factor.value }}%</div>
            <div class="factor-analysis__grid-item-progress">
              <div
                class="factor-analysis__grid-item-progress-fill"
                [style.width.%]="factor.value"
                [style.backgroundColor]="factor.color"
              ></div>
            </div>
          </div>
        }
      </div>
    </div>
  </ion-content>
</ion-page>
